<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSx for ONTAP & SQL Server HA Quiz | SRE Team Training</title>
    <style>
        :root { --bg-primary: #0a0e17; --bg-secondary: #141b2d; --bg-tertiary: #1a2236; --text-primary: #e2e8f0; --text-secondary: #94a3b8; --accent-primary: #f59e0b; --accent-secondary: #fbbf24; --success: #22c55e; --error: #ef4444; --warning: #eab308; --info: #3b82f6; --border: #2d3a52; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 2rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border); }
        .badge { display: inline-block; background: var(--accent-primary); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin-bottom: 1rem; text-transform: uppercase; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: var(--text-secondary); font-size: 1rem; }
        .stats-bar { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); }
        .stat { text-align: center; } .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent-primary); } .stat-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; }
        .mode-selector { display: flex; gap: 1rem; justify-content: center; margin-bottom: 2rem; }
        .mode-btn { padding: 0.75rem 2rem; border: 2px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; }
        .mode-btn:hover { border-color: var(--accent-primary); background: var(--bg-tertiary); }
        .progress-container { background: var(--bg-secondary); border-radius: 12px; padding: 1rem 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .progress-text { font-size: 0.875rem; color: var(--text-secondary); }
        .timer { font-size: 1.25rem; font-weight: 600; color: var(--accent-primary); font-family: 'Consolas', monospace; }
        .timer.warning { color: var(--warning); animation: pulse 1s infinite; } .timer.danger { color: var(--error); animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .progress-bar { height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); border-radius: 4px; transition: width 0.3s ease; }
        .question-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 1.5rem; border: 1px solid var(--border); }
        .question-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .question-number { background: var(--bg-tertiary); color: var(--accent-primary); padding: 0.25rem 0.75rem; border-radius: 6px; font-size: 0.875rem; font-weight: 600; }
        .question-domain { font-size: 0.75rem; color: var(--text-secondary); background: var(--bg-tertiary); padding: 0.25rem 0.5rem; border-radius: 4px; }
        .question-text { font-size: 1.125rem; margin-bottom: 1.5rem; line-height: 1.7; }
        .options { display: flex; flex-direction: column; gap: 0.75rem; }
        .option { display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: var(--bg-tertiary); border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .option:hover:not(.disabled) { border-color: var(--accent-primary); background: rgba(245, 158, 11, 0.1); }
        .option.selected { border-color: var(--accent-primary); border-width: 3px; background: rgba(245, 158, 11, 0.2); box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.25), inset 0 0 12px rgba(245, 158, 11, 0.1); }
        .option.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.15); }
        .option.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.15); }
        .option.disabled { cursor: default; }
        .option-marker { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem; flex-shrink: 0; }
        .option.selected .option-marker { border-color: var(--accent-primary); background: var(--accent-primary); color: white; }
        .option.correct .option-marker { border-color: var(--success); background: var(--success); color: white; }
        .option.incorrect .option-marker { border-color: var(--error); background: var(--error); color: white; }
        .option-text { flex: 1; padding-top: 2px; }
        .explanation { margin-top: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; border-left: 4px solid var(--info); display: none; }
        .explanation.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .explanation-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--info); }
        .answer-header { font-weight: 600; color: var(--success); margin-bottom: 0.5rem; }
        .explanation-text { color: var(--text-secondary); margin-bottom: 1rem; }
        .doc-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.875rem; padding: 0.5rem 1rem; background: rgba(245, 158, 11, 0.1); border-radius: 6px; }
        .doc-link:hover { background: rgba(245, 158, 11, 0.2); }
        .btn-container { display: flex; justify-content: space-between; gap: 1rem; margin-top: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: var(--accent-primary); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results-card { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border); display: none; }
        .results-card.show { display: block; animation: fadeIn 0.5s ease; }
        .results-score { font-size: 4rem; font-weight: 700; margin: 1rem 0; }
        .results-score.pass { color: var(--success); } .results-score.fail { color: var(--error); }
        .results-status { font-size: 1.5rem; margin-bottom: 1rem; }
        .results-status.pass { color: var(--success); } .results-status.fail { color: var(--error); }
        .results-details { color: var(--text-secondary); margin-bottom: 2rem; }
        .results-breakdown { display: flex; justify-content: center; gap: 3rem; margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 10px; }
        .breakdown-item { text-align: center; } .breakdown-value { font-size: 2rem; font-weight: 700; } .breakdown-value.correct { color: var(--success); } .breakdown-value.incorrect { color: var(--error); } .breakdown-label { font-size: 0.875rem; color: var(--text-secondary); }
        .review-section { background: var(--bg-secondary); border-radius: 16px; padding: 2rem; border: 1px solid var(--border); display: none; }
        .review-section.show { display: block; animation: fadeIn 0.5s ease; }
        .review-header { text-align: center; margin-bottom: 2rem; }
        .review-table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
        .review-table th { background: var(--bg-tertiary); color: var(--text-secondary); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; padding: 1rem; text-align: left; border-bottom: 2px solid var(--border); }
        .review-table td { padding: 1rem; border-bottom: 1px solid var(--border); vertical-align: top; }
        .review-table tbody tr { cursor: pointer; transition: all 0.2s ease; }
        .review-table tbody tr:hover { background: rgba(245, 158, 11, 0.1); transform: translateX(4px); }
        .review-table tbody tr.reviewed { background: rgba(245, 158, 11, 0.25); border-left: 6px solid var(--accent-primary); box-shadow: inset 0 0 20px rgba(245, 158, 11, 0.15); }
        .review-table tbody tr.reviewed:hover { background: rgba(245, 158, 11, 0.3); }
        .review-table tbody tr.reviewed .review-q-num { color: var(--accent-secondary); font-weight: 800; }
        .review-table tbody tr.reviewed .review-q-num::before { content: "\2713 "; color: var(--accent-primary); font-size: 1rem; }
        .review-q-num { font-weight: 700; color: var(--accent-primary); white-space: nowrap; }
        .review-q-text { color: var(--text-primary); line-height: 1.6; }
        .review-answer { font-weight: 600; }
        .review-answer.correct { color: var(--success); }
        .review-answer.incorrect { color: var(--error); }
        .review-status { text-align: center; font-size: 1.25rem; }
        .review-hint { text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; }
        .hidden { display: none !important; }
        .shuffle-notice { text-align: center; padding: 0.75rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; margin-bottom: 1.5rem; color: var(--accent-secondary); font-size: 0.875rem; }
        @media (max-width: 640px) { .container { padding: 1rem; } h1 { font-size: 1.5rem; } .stats-bar { gap: 1rem; } .mode-selector, .btn-container, .results-breakdown { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">SRE Team Training</span>
            <h1>FSx for ONTAP & SQL Server HA</h1>
            <p class="subtitle">SQL Server High Availability with Amazon FSx for NetApp ONTAP</p>
            <div class="stats-bar">
                <div class="stat"><div class="stat-value">20</div><div class="stat-label">Questions</div></div>
                <div class="stat"><div class="stat-value">80%</div><div class="stat-label">Pass Score</div></div>
                <div class="stat"><div class="stat-value">50:00</div><div class="stat-label">Exam Time</div></div>
            </div>
        </header>
        <div class="mode-selector" id="modeSelector">
            <button class="mode-btn" onclick="startQuiz('learn')">&#128218; Learn Mode</button>
            <button class="mode-btn" onclick="startQuiz('exam')">&#9201; Exam Mode</button>
        </div>
        <div id="quizContent" class="hidden">
            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-text">Question <span id="currentQ">1</span> of <span id="totalQ">20</span></span>
                    <span class="timer" id="timer">50:00</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            </div>
            <div class="shuffle-notice" id="shuffleNotice">&#128256; Questions and options have been randomized</div>
            <div id="questionsContainer"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="navigate(-1)" disabled>&larr; Previous</button>
                <button class="btn btn-secondary" id="backToReviewBtn" onclick="backToReview()" style="display: none;">&larr; Back to Review</button>
                <button class="btn btn-secondary" id="shuffleBtn" onclick="shuffleQuiz()">&#128256; Shuffle</button>
                <button class="btn btn-primary" id="nextBtn" onclick="navigate(1)">Next &rarr;</button>
            </div>
        </div>
        <div class="results-card" id="resultsCard">
            <h2>Quiz Complete!</h2>
            <div class="results-score" id="scorePercent">0%</div>
            <div class="results-status" id="resultStatus">-</div>
            <p class="results-details" id="resultDetails"></p>
            <div class="results-breakdown">
                <div class="breakdown-item"><div class="breakdown-value correct" id="correctCount">0</div><div class="breakdown-label">Correct</div></div>
                <div class="breakdown-item"><div class="breakdown-value incorrect" id="incorrectCount">0</div><div class="breakdown-label">Incorrect</div></div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="showReview()">&#128202; Review Answers</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">&#128260; Restart Quiz</button>
            </div>
        </div>
        <div class="review-section" id="reviewSection">
            <div class="review-header">
                <h2>Answer Review</h2>
                <p class="results-details">Click any question to review the full answer and explanation</p>
            </div>
            <p class="review-hint">&#128161; Tip: Click on any row to see the full question and explanation in Learn mode</p>
            <table class="review-table">
                <thead>
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 50%">Question</th>
                        <th style="width: 15%">Your Answer</th>
                        <th style="width: 15%">Correct Answer</th>
                        <th style="width: 10%">Status</th>
                    </tr>
                </thead>
                <tbody id="reviewTableBody"></tbody>
            </table>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="backToResults()">&larr; Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuiz()">&#128260; Restart Quiz</button>
            </div>
        </div>
    </div>
    <script>
        const questions = [
            { id: 1, question: "What distinguishes a Multi-AZ FSx for ONTAP deployment from a Single-AZ deployment in the context of SQL Server high availability?", options: ["Multi-AZ supports up to 12 HA pairs while Single-AZ is limited to one HA pair, providing more throughput for SQL Server workloads", "Multi-AZ deploys file servers in separate Availability Zones with synchronous replication, providing continuous availability even during an AZ outage", "Multi-AZ provides double the throughput capacity compared to Single-AZ deployments at the same provisioned level", "Multi-AZ requires three subnets while Single-AZ requires two subnets for redundant network connectivity"], correct: 1, explanation: "Multi-AZ file systems deploy a standby file server in a different Availability Zone from the active file server, with data synchronously replicated across AZs. This provides continuous availability during AZ outages. Option A is incorrect because second-generation Single-AZ actually supports up to 12 HA pairs, while Multi-AZ supports only one. Options C and D describe incorrect technical details.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-AZ.html" },
            { id: 2, question: "Your organization has 4,000+ client databases on a single SQL Server instance that needs to be migrated to AWS with high availability. Why is Always On Failover Cluster Instances (FCI) generally preferable over Always On Availability Groups (AG) for this scenario?", options: ["FCI supports more concurrent connections than AG and can handle higher transaction throughput per database on AWS", "FCI provides instance-level protection where system databases, logins, SQL Agent jobs, and certificates automatically propagate to the failover node, making it ideal for large numbers of small databases", "FCI is available only in SQL Server Enterprise edition while AG works with Standard edition, providing more advanced features", "FCI replicates data asynchronously which reduces network overhead when managing 4,000+ databases across Availability Zones"], correct: 1, explanation: "An FCI provides instance-level high availability: everything inside the SQL Server instance (system databases, logins, SQL Server Agent jobs, certificates) is moved to another WSFC node during failover. This is critical when you have 4,000+ databases because you don't need to configure each database individually for HA. Option A is incorrect - connection limits are unrelated to HA type. Option C reverses reality: FCI works with Standard edition (a key benefit), while AG requires Enterprise for full features. Option D is wrong - FCI uses shared storage, not replication.", docLink: "https://docs.aws.amazon.com/prescriptive-guidance/latest/migration-sql-server/ec2-fci.html" },
            { id: 3, question: "Which storage protocols does Amazon FSx for NetApp ONTAP support for data access?", options: ["NFS, SMB, and HDFS for compatibility with Hadoop ecosystem workloads", "NFS, SMB, iSCSI, and NVMe for multi-protocol access from Linux, Windows, and macOS clients", "SMB, iSCSI, and FTP for Windows-centric and file transfer workloads", "NFS, CIFS, and Fibre Channel for enterprise SAN and NAS integration"], correct: 1, explanation: "FSx for ONTAP provides multi-protocol access to data using NFS (v3, v4, v4.1, v4.2), SMB, iSCSI, and NVMe protocols. This multi-protocol support is key for SQL Server FCI deployments which use iSCSI for shared storage. HDFS, FTP, and Fibre Channel are not supported protocols on FSx for ONTAP.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/what-is-fsx-ontap.html" },
            { id: 4, question: "When configuring iSCSI for SQL Server FCI nodes with FSx for ONTAP, what must be installed on the Windows instances to enable automatic failover between file servers?", options: ["AWS Storage Gateway agent for iSCSI target management and session persistence across failover events", "NetApp ONTAP Device Specific Module (DSM) for Windows to handle path selection and failover signaling", "Multipath-IO (MPIO) with the load balance policy set to Round Robin, which enables the client to recognize multiple paths to storage and handle failover", "AWS Systems Manager agent with the iSCSI plugin enabled for automated path management and health checks"], correct: 2, explanation: "Multipath-IO (MPIO) must be installed on Windows instances to enable automatic failover between FSx for ONTAP file servers when using iSCSI. The MPIO driver recognizes multiple paths to the storage, and the MPIO failover policy should be set to Round Robin. ALUA (Asymmetric Logical Unit Access) handles failover and failback operations. The Windows instance must be restarted after MPIO installation. AWS Storage Gateway and Systems Manager agents are not related to iSCSI failover.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/mount-iscsi-windows.html" },
            { id: 5, question: "In FSx for ONTAP, what is a high-availability (HA) pair?", options: ["Two separate FSx ONTAP file systems that replicate data between them using SnapMirror for cross-region redundancy", "A pair of Storage Virtual Machines (SVMs) configured in active-active mode within the same file system for load balancing", "Two file servers in an active-standby configuration where the standby automatically takes over if the active server becomes unavailable", "A dual-AZ subnet configuration that enables automatic DNS failover for NFS and SMB client connections"], correct: 2, explanation: "An HA pair consists of two file servers in an active-standby configuration: a preferred file server that actively serves traffic and a secondary file server that takes over if the active server is unavailable. First-generation file systems have one HA pair, while second-generation Single-AZ file systems can have up to 12 HA pairs. Each HA pair has one aggregate (a logical set of physical disks). HA pairs are within a single file system, not across file systems.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/HA-pairs.html" },
            { id: 6, question: "What is the purpose of a Storage Virtual Machine (SVM) in FSx for ONTAP, and why is it relevant for SQL Server FCI deployments?", options: ["An SVM is a compute instance that runs the ONTAP operating system and processes SQL queries on behalf of the file system", "An SVM manages the automatic tiering of data between SSD and capacity pool storage tiers based on SQL query access patterns", "An SVM is an isolated file server with its own administrative and data access endpoints, which can be joined to Active Directory for SQL Server authentication", "An SVM is a backup replica of the file system that can be promoted to primary during disaster recovery scenarios"], correct: 2, explanation: "A Storage Virtual Machine (SVM) is an isolated file server with its own administrative and data access endpoints for administering and accessing data. SVMs can be joined to Microsoft Active Directory for authentication and authorization, which is essential for SQL Server FCI deployments. Each SVM provides separate iSCSI, NFS, SMB, and management endpoints. SVMs are not compute instances, tiering managers, or backup replicas.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/how-it-works-fsx-ontap.html" },
            { id: 7, question: "During a failover event in FSx for ONTAP, how long does the process typically take and what is the behavior for Multi-AZ file systems?", options: ["Failover takes 5-10 minutes and all client connections must be manually re-established after the standby is promoted", "Failover typically completes in less than 60 seconds; for Multi-AZ file systems, automatic failback to the preferred file server also occurs when it recovers", "Failover is instantaneous with zero downtime, but only for second-generation Multi-AZ deployments with NVMe protocol", "Failover takes 2-3 minutes and requires a DNS cache flush on all connected clients before connections are restored"], correct: 1, explanation: "FSx for ONTAP failover typically completes in less than 60 seconds from detection of failure to promotion of the standby. For Multi-AZ file systems, Amazon FSx automatically fails back to the preferred file server when it recovers, usually in less than 60 seconds. Endpoint IP addresses remain the same, so failovers are transparent to Linux, Windows, and macOS applications without manual intervention.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-AZ.html" },
            { id: 8, question: "When deploying SQL Server FCI nodes with FSx for ONTAP using iSCSI, what is the recommended placement of the active SQL FCI node relative to the FSx ONTAP file system?", options: ["The active SQL FCI node should be in a different AZ from the FSx ONTAP preferred subnet to maximize cross-AZ redundancy", "The active SQL FCI node should be in the same Availability Zone as the FSx ONTAP preferred subnet for best throughput, lowest latency, and to avoid inter-AZ traffic", "SQL FCI nodes should be distributed evenly across three AZs regardless of FSx ONTAP subnet placement for maximum fault tolerance", "The placement of SQL FCI nodes relative to FSx ONTAP subnets has no measurable impact on performance or latency"], correct: 1, explanation: "AWS recommends that the active SQL Server FCI node should be in the same Availability Zone as the FSx for ONTAP file system's preferred subnet. This achieves the best throughput and lowest latency, and avoids unnecessary inter-AZ network traffic (which also incurs additional cost). The blog post explicitly states this as a best practice for FCI deployments with FSx for ONTAP.", docLink: "https://aws.amazon.com/blogs/modernizing-with-aws/sql-server-high-availability-amazon-fsx-for-netapp-ontap/" },
            { id: 9, question: "What does AWS Launch Wizard provide for SQL Server FCI deployments with FSx for ONTAP?", options: ["Launch Wizard only supports SQL Server Always On Availability Groups; FCI deployments with FSx for ONTAP require fully manual configuration", "Launch Wizard provides a console-based wizard that guides sizing, configuration, and deployment of SQL Server FCI with FSx for ONTAP as shared storage, generating reusable CloudFormation templates", "Launch Wizard automatically discovers and migrates existing on-premises SQL Server databases to the new FCI cluster without any manual intervention", "Launch Wizard provisions only the EC2 instances; FSx ONTAP file systems and WSFC configuration must be created separately"], correct: 1, explanation: "AWS Launch Wizard guides you through sizing, configuration, and deployment of SQL Server FCI with FSx for ONTAP as shared storage. It identifies the right AWS resources, provides cost estimates, and generates reusable CloudFormation templates. Launch Wizard also performs early input validation (VPC, AD credentials, subnet connectivity) to catch configuration issues before they cause deployment failures. It does not auto-migrate databases or only provision EC2 instances.", docLink: "https://docs.aws.amazon.com/launchwizard/latest/userguide/launch-wizard-sql.html" },
            { id: 10, question: "In a default two-node SQL Server FCI deployment via AWS Launch Wizard, what happens if Availability Zone 1 (containing the primary node AND the file share witness) fails?", options: ["Automatic failover occurs seamlessly to AZ2 because the cluster uses a dynamic quorum model that adapts to node availability", "The SQL FCI automatically promotes the secondary node in AZ2 and creates a new file share witness in AZ2 within 60 seconds", "Automatic failover does NOT occur because the cluster loses quorum; manual disaster recovery steps are required, including forcing quorum on the second node", "AWS Lambda functions deployed by Launch Wizard automatically restart the cluster service in AZ2 within 30 seconds of detecting the AZ failure"], correct: 2, explanation: "With a default two-node cluster and file share witness, if AZ1 fails (containing the primary node AND the witness), the cluster loses quorum and automatic failover to AZ2 cannot occur. Manual disaster recovery steps are needed, including restarting the cluster service and forcing quorum on the second node. Launch Wizard offers a three-AZ deployment option to mitigate this scenario, but only in Regions with three or more AZs.", docLink: "https://docs.aws.amazon.com/launchwizard/latest/userguide/launch-wizard-best-practices.html" },
            { id: 11, question: "During the SQL Server FCI bootstrapping process with AWS Launch Wizard, which TCP ports are opened on the Windows Firewall for SQL Server cluster communication?", options: ["Only ports 1433 and 3389 for SQL Server connections and Remote Desktop access", "Ports 1433, 1434, 4022, 5022, 5023, and 135 for SQL Server, SQL Browser, database mirroring, and RPC endpoints", "Ports 1433, 3306, 5432, and 27017 to support multi-database engine compatibility", "Ports 80, 443, 1433, and 8080 for web application and SQL Server connectivity"], correct: 1, explanation: "The Launch Wizard bootstrapping script opens TCP ports 1433 (SQL Server), 1434 (SQL Browser), 4022 (Service Broker), 5022 and 5023 (database mirroring/AG endpoints), and 135 (RPC endpoint mapper) on the Windows Firewall. These ports are essential for SQL Server cluster node communication. Port 3306 is MySQL, 5432 is PostgreSQL, and 27017 is MongoDB - none are relevant to SQL Server FCI.", docLink: "https://docs.aws.amazon.com/launchwizard/latest/userguide/launch-wizard-best-practices.html" },
            { id: 12, question: "When configuring iSCSI on FSx for ONTAP for SQL Server FCI, what is an initiator group (igroup) and why is it important?", options: ["An igroup is a collection of SQL Server databases that share the same LUN for co-located storage to improve I/O performance", "An igroup maps to iSCSI LUNs and controls which initiators (clients) have access to the LUNs, ensuring only authorized hosts can access shared storage", "An igroup is a set of ONTAP CLI commands that are executed together to initialize the iSCSI service on the file system", "An igroup is a Windows Active Directory security group that controls SMB share permissions for the SQL Server service account"], correct: 1, explanation: "An initiator group (igroup) maps to iSCSI LUNs and controls which initiators (clients) have access to those LUNs. When setting up SQL Server FCI, you create an igroup with the Windows host initiator names (IQNs) and map it to the LUN. Multiple comma-separated initiator names can be specified to make LUNs accessible to multiple SQL FCI nodes. The igroup is created using the ONTAP CLI command 'lun igroup create'.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/mount-iscsi-windows.html" },
            { id: 13, question: "FSx for ONTAP has two storage tiers. What are they and how does data move between them?", options: ["Hot storage and Cold storage tiers; data moves based on manual administrator tagging via the FSx console or CLI", "Primary SSD storage and Capacity Pool storage; data is automatically tiered based on access patterns using configurable volume tiering policies", "EBS gp3 storage and S3 Standard storage; data is moved via scheduled AWS DataSync jobs configured per volume", "In-memory NVMe cache and SSD storage; data is promoted to NVMe cache based on SQL query frequency and access pattern analysis"], correct: 1, explanation: "FSx for ONTAP has two storage tiers: primary SSD storage (high-performance, provisioned) and capacity pool storage (fully elastic, cost-optimized for infrequently accessed data). Each volume has a tiering policy that controls when data becomes inactive (cold) and is moved to the capacity pool tier. This automatic tiering can significantly reduce costs for SQL Server deployments where not all 4,000+ databases are accessed frequently. Storage efficiency features (compression, deduplication, compaction) can save up to 65%.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/how-it-works-fsx-ontap.html" },
            { id: 14, question: "For disaster recovery of your SQL Server FCI environment across AWS Regions, which FSx for ONTAP feature enables cross-region data replication?", options: ["AWS Database Migration Service (DMS) with continuous replication configured to target an FSx ONTAP file system in the DR region", "S3 Cross-Region Replication of FSx ONTAP automatic backup snapshots stored in the backup S3 bucket", "NetApp SnapMirror replication, which is supported natively by FSx for ONTAP for scheduled cross-region replication", "AWS Elastic Disaster Recovery (DRS) with block-level replication of FSx ONTAP volumes to a staging area in the target region"], correct: 2, explanation: "FSx for ONTAP natively supports NetApp SnapMirror replication for cross-region disaster recovery. SnapMirror enables you to replicate data from your primary FSx for ONTAP file system to another FSx for ONTAP file system in a different AWS Region, providing a way to fail over your SQL Server FCI environment. AWS DMS is for database-level migration, not storage-level replication. FSx ONTAP backups can be copied cross-region but SnapMirror provides the continuous replication needed for low RPO.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/what-is-fsx-ontap.html" },
            { id: 15, question: "FSx for ONTAP volumes are thin provisioned. What does this mean for managing storage with 4,000+ SQL Server databases?", options: ["Each volume is pre-allocated to its full configured size at creation time, so you must provision the total capacity upfront for all databases", "Volumes only consume storage capacity for the data actually stored in them; you can create volumes whose total configured size exceeds physical capacity as long as actual usage does not exceed it", "Thin provisioning means all volumes are automatically compressed by 50%, reducing storage cost but adding CPU overhead to the file servers", "Thin provisioning limits each volume to a maximum of 1 TiB, requiring you to create multiple file systems to accommodate 4,000+ databases"], correct: 1, explanation: "FSx for ONTAP volumes are thin provisioned, meaning storage is allocated dynamically as data is written, not reserved upfront. For example, you could create three 10 TiB volumes on a 10 TiB file system as long as total actual data doesn't exceed 10 TiB. This is valuable for 4,000+ databases because you can size volumes generously without immediately consuming all physical capacity. Free space is released back to the file system when data is deleted.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/how-it-works-fsx-ontap.html" },
            { id: 16, question: "What encryption options does FSx for ONTAP provide for protecting SQL Server data at rest and in transit?", options: ["Only encryption at rest using AES-256 managed by the file system; in-transit encryption is not natively supported", "Encryption at rest using AWS KMS keys for file system data and backups, plus encryption in transit via SMB Kerberos, IPSec, and Nitro-based encryption", "Encryption is handled entirely by SQL Server Transparent Data Encryption (TDE); FSx ONTAP provides no native storage-level encryption", "Only in-transit encryption using TLS 1.3; encryption at rest requires configuring third-party encryption tools on the ONTAP CLI"], correct: 1, explanation: "FSx for ONTAP provides comprehensive encryption: data at rest is encrypted using AWS KMS keys (covering both file system data and backups), and data in transit can be encrypted using SMB Kerberos, IPSec, or Nitro-based encryption. This provides defense-in-depth for SQL Server data without requiring SQL Server TDE as the sole encryption mechanism. The encryption is managed by the service and integrates with AWS KMS for key management.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/what-is-fsx-ontap.html" },
            { id: 17, question: "When joining an FSx for ONTAP SVM to Microsoft Active Directory for SQL Server FCI authentication, what is the recommended method for providing AD service account credentials?", options: ["Hardcode the credentials in the ONTAP CLI configuration script for repeatable automated deployments across environments", "Store credentials in a plaintext configuration file on the FSx ONTAP management endpoint accessible only via SSH", "Store credentials in AWS Secrets Manager and reference the secret ARN in the SVM's Active Directory configuration", "Store credentials in EC2 instance user data of the SQL Server FCI nodes so they are available at boot time"], correct: 2, explanation: "AWS recommends storing Active Directory service account credentials in AWS Secrets Manager and referencing the secret ARN when configuring the SVM's Active Directory connection. This follows security best practices: credentials are not hardcoded, they can be rotated, and access is controlled via IAM policies. The FSx console provides this as an explicit option when creating an SVM. Plaintext credentials are also supported but Secrets Manager is the recommended approach.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/creating-svms.html" },
            { id: 18, question: "How can you test failover on your FSx for ONTAP file system to verify that your SQL Server FCI handles failover correctly?", options: ["Manually terminate the active file server's EC2 instance from the EC2 console to simulate an unplanned outage", "Modify the file system's throughput capacity, which triggers Amazon FSx to switch out the file servers serially, causing a failover and then a failback", "Run the 'aws fsx trigger-failover' CLI command to initiate a controlled failover test on the file system", "Disable the elastic network interface attached to the active file server in the VPC console to simulate a network partition"], correct: 1, explanation: "You can test failover by modifying the file system's throughput capacity. Amazon FSx switches out file servers serially: it fails over to the secondary server while replacing the preferred file server first, then fails back to the new primary and replaces the secondary. You can monitor progress via the FSx console, CLI, or API. You cannot directly terminate FSx file server instances (they are managed by the service), and there is no 'trigger-failover' CLI command.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-AZ.html" },
            { id: 19, question: "Can you change the deployment type of an existing FSx for ONTAP file system (for example, from Single-AZ to Multi-AZ) after creation?", options: ["Yes, you can change the deployment type at any time from the FSx console with zero downtime through an in-place upgrade", "Yes, but only during a scheduled maintenance window when all connected clients and SQL Server FCI nodes are disconnected", "No, the deployment type cannot be changed after creation; you must migrate data to a new file system using SnapMirror, AWS DataSync, or backup and restore", "No, but you can submit an AWS Support request to have the deployment type changed via a backend operation"], correct: 2, explanation: "You cannot change the deployment type of an FSx for ONTAP file system after it is created. If you need to change from Single-AZ to Multi-AZ (or vice versa), you must create a new file system with the desired deployment type and migrate data using NetApp SnapMirror, AWS DataSync, or by restoring from a backup. This is important to plan for during initial architecture decisions for SQL Server FCI deployments.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-AZ.html" },
            { id: 20, question: "When configuring iSCSI on Windows for FSx for ONTAP, the recommended script establishes 8 sessions per iSCSI connection to each target portal. What is the purpose of these multiple sessions?", options: ["Multiple sessions provide data redundancy by writing the same data blocks across 8 different LUNs simultaneously for fault tolerance", "Multiple sessions enable a single client to drive higher aggregate throughput to the iSCSI LUN, with each session providing up to 625 MBps of throughput for a total of up to 40 Gbps", "Multiple sessions are required because Windows limits each individual iSCSI session to 512 MB of data transfer before requiring a new session", "Multiple sessions distribute SQL Server query execution load across different CPU cores on the FSx ONTAP file server for parallel processing"], correct: 1, explanation: "The iSCSI configuration script establishes 8 sessions per connection to each target portal to maximize throughput. Each session provides up to 625 MBps of throughput, so 8 sessions can drive up to 5,000 MBps (40 Gbps) aggregate throughput to the iSCSI LUN. This ensures a single client can fully utilize the highest FSx for ONTAP throughput capacity tier (4,000 MBps). The number of sessions can be adjusted via the RecommendedConnectionCount variable based on your EC2 instance's network bandwidth.", docLink: "https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/mount-iscsi-windows.html" }
        ];

        let currentMode = 'learn', currentQuestion = 0, userAnswers = [], answersRevealed = [], shuffledQuestions = [], timerInterval = null, timeRemaining = 0, inReviewMode = false, reviewedQuestions = [];
        function shuffleArray(a) { const b = [...a]; for (let i = b.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [b[i], b[j]] = [b[j], b[i]]; } return b; }
        function shuffleQuestionOptions(q) { const idx = shuffleArray([0,1,2,3]); return { ...q, options: idx.map(i => q.options[i]), correct: idx.indexOf(q.correct) }; }
        function startQuiz(mode) { currentMode = mode; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); inReviewMode = false; reviewedQuestions = []; document.getElementById('modeSelector').classList.add('hidden'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('totalQ').textContent = shuffledQuestions.length; document.getElementById('backToReviewBtn').style.display = 'none'; if (mode === 'exam') { timeRemaining = shuffledQuestions.length * 150; startTimer(); document.getElementById('shuffleBtn').classList.add('hidden'); } else { document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').classList.remove('hidden'); } renderQuestion(); }
        function startTimer() { updateTimerDisplay(); timerInterval = setInterval(() => { timeRemaining--; updateTimerDisplay(); if (timeRemaining <= 0) { clearInterval(timerInterval); showResults(); } }, 1000); }
        function updateTimerDisplay() { const m = Math.floor(timeRemaining / 60), s = timeRemaining % 60, el = document.getElementById('timer'); el.textContent = `${m}:${s.toString().padStart(2, '0')}`; el.classList.remove('warning', 'danger'); if (timeRemaining <= 60) el.classList.add('danger'); else if (timeRemaining <= 300) el.classList.add('warning'); }
        function renderQuestion() { const q = shuffledQuestions[currentQuestion], letters = ['A','B','C','D'], ans = userAnswers[currentQuestion], revealed = answersRevealed[currentQuestion]; let opts = q.options.map((o, i) => { let c = 'option'; if (currentMode === 'learn' && revealed) { c += ' disabled'; if (i === q.correct) c += ' correct'; else if (i === ans && ans !== q.correct) c += ' incorrect'; } else if (ans === i) c += ' selected'; return `<div class="${c}" onclick="selectOption(${i})"><span class="option-marker">${letters[i]}</span><span class="option-text">${o}</span></div>`; }).join(''); let exp = currentMode === 'learn' ? `<div class="explanation ${revealed ? 'show' : ''}"><div class="explanation-title">&#128214; Explanation</div><div class="answer-header">Correct Answer: ${letters[q.correct]}</div><p class="explanation-text">${q.explanation}</p><a href="${q.docLink}" target="_blank" class="doc-link">&#128196; View AWS Documentation &rarr;</a></div>` : ''; document.getElementById('questionsContainer').innerHTML = `<div class="question-card"><div class="question-header"><span class="question-number">Question ${currentQuestion + 1}</span><span class="question-domain">FSx ONTAP / SQL HA</span></div><p class="question-text">${q.question}</p><div class="options">${opts}</div>${currentMode === 'learn' && !revealed ? '<button class="btn btn-primary" style="margin-top:1rem;width:100%;" onclick="revealAnswer()">Show Answer</button>' : ''}${exp}</div>`; document.getElementById('currentQ').textContent = currentQuestion + 1; document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%`; document.getElementById('prevBtn').disabled = currentQuestion === 0; document.getElementById('nextBtn').textContent = currentQuestion === shuffledQuestions.length - 1 ? (currentMode === 'exam' ? 'Submit Quiz' : 'See Results') : 'Next \u2192'; }
        function selectOption(i) { if (currentMode === 'learn' && answersRevealed[currentQuestion]) return; userAnswers[currentQuestion] = i; renderQuestion(); }
        function revealAnswer() { if (userAnswers[currentQuestion] === null) userAnswers[currentQuestion] = -1; answersRevealed[currentQuestion] = true; renderQuestion(); }
        function navigate(d) { if (d === 1 && currentQuestion === shuffledQuestions.length - 1) { showResults(); return; } currentQuestion = Math.max(0, Math.min(currentQuestion + d, shuffledQuestions.length - 1)); renderQuestion(); }
        function shuffleQuiz() { if (currentMode !== 'learn') return; currentQuestion = 0; userAnswers = new Array(questions.length).fill(null); answersRevealed = new Array(questions.length).fill(false); shuffledQuestions = shuffleArray(questions).map(shuffleQuestionOptions); renderQuestion(); }
        function showResults() { if (timerInterval) clearInterval(timerInterval); let correct = shuffledQuestions.reduce((c, q, i) => c + (userAnswers[i] === q.correct ? 1 : 0), 0); const total = shuffledQuestions.length, pct = Math.round((correct / total) * 100), pass = pct >= 80; document.getElementById('quizContent').classList.add('hidden'); document.getElementById('resultsCard').classList.add('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('scorePercent').textContent = pct + '%'; document.getElementById('scorePercent').className = 'results-score ' + (pass ? 'pass' : 'fail'); document.getElementById('resultStatus').textContent = pass ? '\uD83C\uDF89 PASSED!' : '\uD83D\uDCDA Keep Studying'; document.getElementById('resultStatus').className = 'results-status ' + (pass ? 'pass' : 'fail'); document.getElementById('resultDetails').textContent = `You answered ${correct} out of ${total} questions correctly.`; document.getElementById('correctCount').textContent = correct; document.getElementById('incorrectCount').textContent = total - correct; }
        function showReview() { const letters = ['A','B','C','D']; const tbody = document.getElementById('reviewTableBody'); tbody.innerHTML = shuffledQuestions.map((q, i) => { const userAns = userAnswers[i]; const isCorrect = userAns === q.correct; const userLetter = userAns !== null && userAns >= 0 ? letters[userAns] : 'No Answer'; const correctLetter = letters[q.correct]; const statusIcon = isCorrect ? '\u2713' : '\u2717'; const statusClass = isCorrect ? 'correct' : 'incorrect'; const qText = q.question.length > 120 ? q.question.substring(0, 120) + '...' : q.question; const reviewedClass = reviewedQuestions.includes(i) ? 'reviewed' : ''; return `<tr class="${reviewedClass}" onclick="reviewQuestion(${i})"><td class="review-q-num">${i + 1}</td><td class="review-q-text">${qText}</td><td class="review-answer ${userAns === q.correct ? 'correct' : 'incorrect'}">${userLetter}</td><td class="review-answer correct">${correctLetter}</td><td class="review-status ${statusClass}">${statusIcon}</td></tr>`; }).join(''); document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.add('show'); inReviewMode = true; }
        function reviewQuestion(qIndex) { if (!reviewedQuestions.includes(qIndex)) { reviewedQuestions.push(qIndex); } currentMode = 'learn'; currentQuestion = qIndex; answersRevealed[qIndex] = true; document.getElementById('reviewSection').classList.remove('show'); document.getElementById('quizContent').classList.remove('hidden'); document.getElementById('timer').textContent = 'Learn Mode'; document.getElementById('shuffleBtn').style.display = 'none'; document.getElementById('backToReviewBtn').style.display = 'inline-block'; if (timerInterval) clearInterval(timerInterval); renderQuestion(); }
        function backToReview() { document.getElementById('quizContent').classList.add('hidden'); showReview(); }
        function backToResults() { document.getElementById('reviewSection').classList.remove('show'); document.getElementById('resultsCard').classList.add('show'); inReviewMode = false; }
        function restartQuiz() { document.getElementById('resultsCard').classList.remove('show'); document.getElementById('reviewSection').classList.remove('show'); document.getElementById('modeSelector').classList.remove('hidden'); document.getElementById('quizContent').classList.add('hidden'); document.getElementById('backToReviewBtn').style.display = 'none'; inReviewMode = false; reviewedQuestions = []; if (timerInterval) clearInterval(timerInterval); }
    </script>
</body>
</html>
